[32mINFO    [0m jubilant:_juju.py:308 cli: juju add-model --no-switch jubilant-0e894980
[32mINFO    [0m jubilant:_juju.py:308 cli: juju deploy --model jubilant-0e894980 ./http-proxy-configurator_amd64.charm http-proxy-configurator --base ubuntu@24.04
[32mINFO    [0m jubilant:_juju.py:308 cli: juju deploy --model jubilant-0e894980 squid-forward-proxy squid-forward-proxy --base ubuntu@24.04 --channel latest/edge --revision 22
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
+ .model.name = 'jubilant-0e894980'
+ .model.type = 'iaas'
+ .model.controller = 'github-pr-ed25f-lxd'
+ .model.cloud = 'localhost'
+ .model.version = '3.6.14'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .machines['0'].juju_status.current = 'pending'
+ .machines['0'].instance_id = 'pending'
+ .machines['0'].machine_status.current = 'allocating'
+ .machines['0'].machine_status.message = 'Creating container'
+ .machines['0'].modification_status.current = 'idle'
+ .machines['0'].base.name = 'ubuntu'
+ .machines['0'].base.channel = '24.04'
+ .machines['0'].constraints = 'arch=amd64'
+ .machines['1'].juju_status.current = 'pending'
+ .machines['1'].instance_id = 'pending'
+ .machines['1'].machine_status.current = 'allocating'
+ .machines['1'].machine_status.message = 'Creating container'
+ .machines['1'].modification_status.current = 'idle'
+ .machines['1'].base.name = 'ubuntu'
+ .machines['1'].base.channel = '24.04'
+ .machines['1'].constraints = 'arch=amd64'
+ .apps['http-proxy-configurator'].charm = 'local:http-proxy-configurator-0'
+ .apps['http-proxy-configurator'].charm_origin = 'local'
+ .apps['http-proxy-configurator'].charm_name = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_rev = 0
+ .apps['http-proxy-configurator'].exposed = False
+ .apps['http-proxy-configurator'].base.name = 'ubuntu'
+ .apps['http-proxy-configurator'].base.channel = '24.04'
+ .apps['http-proxy-configurator'].app_status.current = 'waiting'
+ .apps['http-proxy-configurator'].app_status.message = 'waiting for machine'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'waiting'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'waiting for machine'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'allocating'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].machine = '0'
+ .apps['http-proxy-configurator'].endpoint_bindings[''] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['squid-forward-proxy'].charm = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].charm_origin = 'charmhub'
+ .apps['squid-forward-proxy'].charm_name = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].charm_rev = 22
+ .apps['squid-forward-proxy'].exposed = False
+ .apps['squid-forward-proxy'].base.name = 'ubuntu'
+ .apps['squid-forward-proxy'].base.channel = '24.04'
+ .apps['squid-forward-proxy'].charm_channel = 'latest/edge'
+ .apps['squid-forward-proxy'].app_status.current = 'waiting'
+ .apps['squid-forward-proxy'].app_status.message = 'waiting for machine'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].related_app = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].interface = 'squid_peer'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].scope = 'global'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'waiting'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'waiting for machine'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'allocating'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].machine = '1'
+ .apps['squid-forward-proxy'].endpoint_bindings[''] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['cos-agent'] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['squid-peer'] = 'alpha'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .machines['0'].instance_id = 'pending'
- .machines['0'].machine_status.current = 'allocating'
- .machines['0'].machine_status.message = 'Creating container'
- .machines['0'].modification_status.current = 'idle'
+ .machines['0'].instance_id = 'juju-82d035-0'
+ .machines['0'].machine_status.current = 'running'
+ .machines['0'].machine_status.message = 'Container started'
+ .machines['0'].modification_status.current = 'applied'
+ .machines['0'].hardware = 'arch=amd64 cores=0 mem=0M availability-zone=runnervmwffz4 virt-type=container'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .machines['0'].machine_status.message = 'Container started'
+ .machines['0'].machine_status.message = 'Running'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
+ .machines['0'].dns_name = '10.46.250.47'
+ .machines['0'].ip_addresses[0] = '10.46.250.47'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].public_address = '10.46.250.47'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .machines['1'].instance_id = 'pending'
- .machines['1'].machine_status.current = 'allocating'
- .machines['1'].machine_status.message = 'Creating container'
- .machines['1'].modification_status.current = 'idle'
+ .machines['1'].instance_id = 'juju-82d035-1'
+ .machines['1'].machine_status.current = 'running'
+ .machines['1'].machine_status.message = 'Container started'
+ .machines['1'].modification_status.current = 'applied'
+ .machines['1'].hardware = 'arch=amd64 cores=0 mem=0M availability-zone=runnervmwffz4 virt-type=container'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .machines['1'].machine_status.message = 'Container started'
+ .machines['1'].machine_status.message = 'Running'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
+ .machines['1'].dns_name = '10.46.250.244'
+ .machines['1'].ip_addresses[0] = '10.46.250.244'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].public_address = '10.46.250.244'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .machines['0'].juju_status.current = 'pending'
+ .machines['0'].juju_status.current = 'started'
+ .machines['0'].juju_status.version = '3.6.14'
+ .machines['0'].hostname = 'juju-82d035-0'
+ .machines['0'].network_interfaces['eth0'].ip_addresses[0] = '10.46.250.47'
+ .machines['0'].network_interfaces['eth0'].mac_address = '00:16:3e:3a:86:21'
+ .machines['0'].network_interfaces['eth0'].is_up = True
+ .machines['0'].network_interfaces['eth0'].gateway = '10.46.250.1'
+ .machines['0'].network_interfaces['eth0'].space = 'alpha'
- .apps['http-proxy-configurator'].app_status.message = 'waiting for machine'
+ .apps['http-proxy-configurator'].app_status.message = 'agent initialising'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'waiting for machine'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'agent initialising'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.version = '3.6.14'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].leader = True
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].app_status.current = 'waiting'
- .apps['http-proxy-configurator'].app_status.message = 'agent initialising'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'waiting'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'agent initialising'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'allocating'
+ .apps['http-proxy-configurator'].app_status.current = 'maintenance'
+ .apps['http-proxy-configurator'].app_status.message = 'installing charm software'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'maintenance'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'installing charm software'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running install hook'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running install hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running leader-elected hook'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].app_status.current = 'maintenance'
- .apps['http-proxy-configurator'].app_status.message = 'installing charm software'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'maintenance'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'installing charm software'
+ .apps['http-proxy-configurator'].app_status.current = 'blocked'
+ .apps['http-proxy-configurator'].app_status.message = 'Invalid charm configuration(s): http_proxy_domains'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'blocked'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'Invalid charm configuration(s): http_proxy_domains'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running leader-elected hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running start hook'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running start hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .machines['1'].juju_status.current = 'pending'
+ .machines['1'].juju_status.current = 'started'
+ .machines['1'].juju_status.version = '3.6.14'
+ .machines['1'].hostname = 'juju-82d035-1'
+ .machines['1'].network_interfaces['eth0'].ip_addresses[0] = '10.46.250.244'
+ .machines['1'].network_interfaces['eth0'].mac_address = '00:16:3e:3e:55:2c'
+ .machines['1'].network_interfaces['eth0'].is_up = True
+ .machines['1'].network_interfaces['eth0'].gateway = '10.46.250.1'
+ .machines['1'].network_interfaces['eth0'].space = 'alpha'
- .apps['squid-forward-proxy'].app_status.message = 'waiting for machine'
+ .apps['squid-forward-proxy'].app_status.message = 'agent initialising'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'waiting for machine'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'agent initialising'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.version = '3.6.14'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].leader = True
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['squid-forward-proxy'].app_status.current = 'waiting'
- .apps['squid-forward-proxy'].app_status.message = 'agent initialising'
+ .apps['squid-forward-proxy'].app_status.current = 'maintenance'
+ .apps['squid-forward-proxy'].app_status.message = 'installing charm software'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'waiting'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'agent initialising'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'allocating'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'maintenance'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'installing charm software'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'executing'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running install hook'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['squid-forward-proxy'].app_status.message = 'installing charm software'
+ .apps['squid-forward-proxy'].app_status.message = 'installing squid'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'installing charm software'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'installing squid'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['squid-forward-proxy'].app_status.current = 'maintenance'
- .apps['squid-forward-proxy'].app_status.message = 'installing squid'
+ .apps['squid-forward-proxy'].app_status.current = 'active'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'maintenance'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'installing squid'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'active'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running install hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running leader-elected hook'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
+ .apps['squid-forward-proxy'].app_status.message = 'ready: 0'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'ready: 0'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running leader-elected hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running start hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].open_ports[0] = '3128/tcp'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'executing'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running start hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'idle'
[32mINFO    [0m jubilant:_juju.py:308 cli: juju deploy --model jubilant-0e894980 ./http-proxy-configurator_amd64.charm requirer --base ubuntu@24.04 --config http-proxy-domains=ignored
[32mINFO    [0m jubilant:_juju.py:308 cli: juju integrate --model jubilant-0e894980 squid-forward-proxy:http-proxy http-proxy-configurator:http-proxy
[32mINFO    [0m jubilant:_juju.py:308 cli: juju config --model jubilant-0e894980 http-proxy-configurator http-proxy-domains=canonical.com
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
+ .model.name = 'jubilant-0e894980'
+ .model.type = 'iaas'
+ .model.controller = 'github-pr-ed25f-lxd'
+ .model.cloud = 'localhost'
+ .model.version = '3.6.14'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .machines['0'].juju_status.current = 'started'
+ .machines['0'].juju_status.version = '3.6.14'
+ .machines['0'].hostname = 'juju-82d035-0'
+ .machines['0'].dns_name = '10.46.250.47'
+ .machines['0'].ip_addresses[0] = '10.46.250.47'
+ .machines['0'].instance_id = 'juju-82d035-0'
+ .machines['0'].machine_status.current = 'running'
+ .machines['0'].machine_status.message = 'Running'
+ .machines['0'].modification_status.current = 'applied'
+ .machines['0'].base.name = 'ubuntu'
+ .machines['0'].base.channel = '24.04'
+ .machines['0'].network_interfaces['eth0'].ip_addresses[0] = '10.46.250.47'
+ .machines['0'].network_interfaces['eth0'].mac_address = '00:16:3e:3a:86:21'
+ .machines['0'].network_interfaces['eth0'].is_up = True
+ .machines['0'].network_interfaces['eth0'].gateway = '10.46.250.1'
+ .machines['0'].network_interfaces['eth0'].space = 'alpha'
+ .machines['0'].constraints = 'arch=amd64'
+ .machines['0'].hardware = 'arch=amd64 cores=0 mem=0M availability-zone=runnervmwffz4 virt-type=container'
+ .machines['1'].juju_status.current = 'started'
+ .machines['1'].juju_status.version = '3.6.14'
+ .machines['1'].hostname = 'juju-82d035-1'
+ .machines['1'].dns_name = '10.46.250.244'
+ .machines['1'].ip_addresses[0] = '10.46.250.244'
+ .machines['1'].instance_id = 'juju-82d035-1'
+ .machines['1'].machine_status.current = 'running'
+ .machines['1'].machine_status.message = 'Running'
+ .machines['1'].modification_status.current = 'applied'
+ .machines['1'].base.name = 'ubuntu'
+ .machines['1'].base.channel = '24.04'
+ .machines['1'].network_interfaces['eth0'].ip_addresses[0] = '10.46.250.244'
+ .machines['1'].network_interfaces['eth0'].mac_address = '00:16:3e:3e:55:2c'
+ .machines['1'].network_interfaces['eth0'].is_up = True
+ .machines['1'].network_interfaces['eth0'].gateway = '10.46.250.1'
+ .machines['1'].network_interfaces['eth0'].space = 'alpha'
+ .machines['1'].constraints = 'arch=amd64'
+ .machines['1'].hardware = 'arch=amd64 cores=0 mem=0M availability-zone=runnervmwffz4 virt-type=container'
+ .machines['2'].juju_status.current = 'pending'
+ .machines['2'].instance_id = 'pending'
+ .machines['2'].machine_status.current = 'allocating'
+ .machines['2'].machine_status.message = 'Creating container'
+ .machines['2'].modification_status.current = 'idle'
+ .machines['2'].base.name = 'ubuntu'
+ .machines['2'].base.channel = '24.04'
+ .machines['2'].constraints = 'arch=amd64'
+ .apps['http-proxy-configurator'].charm = 'local:http-proxy-configurator-0'
+ .apps['http-proxy-configurator'].charm_origin = 'local'
+ .apps['http-proxy-configurator'].charm_name = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_rev = 0
+ .apps['http-proxy-configurator'].exposed = False
+ .apps['http-proxy-configurator'].base.name = 'ubuntu'
+ .apps['http-proxy-configurator'].base.channel = '24.04'
+ .apps['http-proxy-configurator'].app_status.current = 'blocked'
+ .apps['http-proxy-configurator'].app_status.message = 'Invalid charm configuration(s): http_proxy_domains'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].related_app = 'squid-forward-proxy'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].scope = 'global'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'blocked'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'Invalid charm configuration(s): http_proxy_domains'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running http-proxy-relation-created hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.version = '3.6.14'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].leader = True
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].machine = '0'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].public_address = '10.46.250.47'
+ .apps['http-proxy-configurator'].endpoint_bindings[''] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['requirer'].charm = 'local:http-proxy-configurator-1'
+ .apps['requirer'].charm_origin = 'local'
+ .apps['requirer'].charm_name = 'http-proxy-configurator'
+ .apps['requirer'].charm_rev = 1
+ .apps['requirer'].exposed = False
+ .apps['requirer'].base.name = 'ubuntu'
+ .apps['requirer'].base.channel = '24.04'
+ .apps['requirer'].app_status.current = 'waiting'
+ .apps['requirer'].app_status.message = 'waiting for machine'
+ .apps['requirer'].units['requirer/0'].workload_status.current = 'waiting'
+ .apps['requirer'].units['requirer/0'].workload_status.message = 'waiting for machine'
+ .apps['requirer'].units['requirer/0'].juju_status.current = 'allocating'
+ .apps['requirer'].units['requirer/0'].machine = '2'
+ .apps['requirer'].endpoint_bindings[''] = 'alpha'
+ .apps['requirer'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['requirer'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['squid-forward-proxy'].charm = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].charm_origin = 'charmhub'
+ .apps['squid-forward-proxy'].charm_name = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].charm_rev = 22
+ .apps['squid-forward-proxy'].exposed = False
+ .apps['squid-forward-proxy'].base.name = 'ubuntu'
+ .apps['squid-forward-proxy'].base.channel = '24.04'
+ .apps['squid-forward-proxy'].charm_channel = 'latest/edge'
+ .apps['squid-forward-proxy'].app_status.current = 'active'
+ .apps['squid-forward-proxy'].app_status.message = 'ready: 0'
+ .apps['squid-forward-proxy'].relations['http-proxy'][0].related_app = 'http-proxy-configurator'
+ .apps['squid-forward-proxy'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['squid-forward-proxy'].relations['http-proxy'][0].scope = 'global'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].related_app = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].interface = 'squid_peer'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].scope = 'global'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'active'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'ready: 0'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'executing'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running http-proxy-relation-created hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.version = '3.6.14'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].leader = True
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].machine = '1'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].open_ports[0] = '3128/tcp'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].public_address = '10.46.250.244'
+ .apps['squid-forward-proxy'].endpoint_bindings[''] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['cos-agent'] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['squid-peer'] = 'alpha'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].app_status.current = 'blocked'
- .apps['http-proxy-configurator'].app_status.message = 'Invalid charm configuration(s): http_proxy_domains'
+ .apps['http-proxy-configurator'].app_status.current = 'active'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'blocked'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'Invalid charm configuration(s): http_proxy_domains'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'active'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running http-proxy-relation-created hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running http-proxy-relation-joined hook for squid-forward-proxy/0'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running http-proxy-relation-created hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running http-proxy-relation-changed hook for http-proxy-configurator/0'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running http-proxy-relation-joined hook for squid-forward-proxy/0'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running http-proxy-relation-changed hook for squid-forward-proxy/0'
- .apps['squid-forward-proxy'].app_status.message = 'ready: 0'
+ .apps['squid-forward-proxy'].app_status.message = 'ready: 1'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'ready: 0'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'ready: 1'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running http-proxy-relation-changed hook for http-proxy-configurator/0'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running http-proxy-relation-changed hook'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running http-proxy-relation-changed hook for squid-forward-proxy/0'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running http-proxy-relation-changed hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running squid-peer-relation-changed hook'
[32mINFO    [0m jubilant:_juju.py:308 cli: juju run --model jubilant-0e894980 --format json http-proxy-configurator/0 get-proxies
[32mINFO    [0m jubilant:_juju.py:308 cli: juju integrate --model jubilant-0e894980 http-proxy-configurator:delegate-http-proxy requirer:http-proxy
[32mINFO    [0m jubilant:_juju.py:308 cli: juju config --model jubilant-0e894980 http-proxy-configurator http-proxy-domains=canonical.com http-proxy-auth=srcip
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
+ .model.name = 'jubilant-0e894980'
+ .model.type = 'iaas'
+ .model.controller = 'github-pr-ed25f-lxd'
+ .model.cloud = 'localhost'
+ .model.version = '3.6.14'
+ .model.region = 'localhost'
+ .model.model_status.current = 'available'
+ .machines['0'].juju_status.current = 'started'
+ .machines['0'].juju_status.version = '3.6.14'
+ .machines['0'].hostname = 'juju-82d035-0'
+ .machines['0'].dns_name = '10.46.250.47'
+ .machines['0'].ip_addresses[0] = '10.46.250.47'
+ .machines['0'].instance_id = 'juju-82d035-0'
+ .machines['0'].machine_status.current = 'running'
+ .machines['0'].machine_status.message = 'Running'
+ .machines['0'].modification_status.current = 'applied'
+ .machines['0'].base.name = 'ubuntu'
+ .machines['0'].base.channel = '24.04'
+ .machines['0'].network_interfaces['eth0'].ip_addresses[0] = '10.46.250.47'
+ .machines['0'].network_interfaces['eth0'].mac_address = '00:16:3e:3a:86:21'
+ .machines['0'].network_interfaces['eth0'].is_up = True
+ .machines['0'].network_interfaces['eth0'].gateway = '10.46.250.1'
+ .machines['0'].network_interfaces['eth0'].space = 'alpha'
+ .machines['0'].constraints = 'arch=amd64'
+ .machines['0'].hardware = 'arch=amd64 cores=0 mem=0M availability-zone=runnervmwffz4 virt-type=container'
+ .machines['1'].juju_status.current = 'started'
+ .machines['1'].juju_status.version = '3.6.14'
+ .machines['1'].hostname = 'juju-82d035-1'
+ .machines['1'].dns_name = '10.46.250.244'
+ .machines['1'].ip_addresses[0] = '10.46.250.244'
+ .machines['1'].instance_id = 'juju-82d035-1'
+ .machines['1'].machine_status.current = 'running'
+ .machines['1'].machine_status.message = 'Running'
+ .machines['1'].modification_status.current = 'applied'
+ .machines['1'].base.name = 'ubuntu'
+ .machines['1'].base.channel = '24.04'
+ .machines['1'].network_interfaces['eth0'].ip_addresses[0] = '10.46.250.244'
+ .machines['1'].network_interfaces['eth0'].mac_address = '00:16:3e:3e:55:2c'
+ .machines['1'].network_interfaces['eth0'].is_up = True
+ .machines['1'].network_interfaces['eth0'].gateway = '10.46.250.1'
+ .machines['1'].network_interfaces['eth0'].space = 'alpha'
+ .machines['1'].constraints = 'arch=amd64'
+ .machines['1'].hardware = 'arch=amd64 cores=0 mem=0M availability-zone=runnervmwffz4 virt-type=container'
+ .machines['2'].juju_status.current = 'pending'
+ .machines['2'].instance_id = 'pending'
+ .machines['2'].machine_status.current = 'allocating'
+ .machines['2'].machine_status.message = 'Creating container'
+ .machines['2'].modification_status.current = 'idle'
+ .machines['2'].base.name = 'ubuntu'
+ .machines['2'].base.channel = '24.04'
+ .machines['2'].constraints = 'arch=amd64'
+ .apps['http-proxy-configurator'].charm = 'local:http-proxy-configurator-0'
+ .apps['http-proxy-configurator'].charm_origin = 'local'
+ .apps['http-proxy-configurator'].charm_name = 'http-proxy-configurator'
+ .apps['http-proxy-configurator'].charm_rev = 0
+ .apps['http-proxy-configurator'].exposed = False
+ .apps['http-proxy-configurator'].base.name = 'ubuntu'
+ .apps['http-proxy-configurator'].base.channel = '24.04'
+ .apps['http-proxy-configurator'].app_status.current = 'active'
+ .apps['http-proxy-configurator'].relations['delegate-http-proxy'][0].related_app = 'requirer'
+ .apps['http-proxy-configurator'].relations['delegate-http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].relations['delegate-http-proxy'][0].scope = 'global'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].related_app = 'squid-forward-proxy'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['http-proxy-configurator'].relations['http-proxy'][0].scope = 'global'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'active'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running delegate-http-proxy-relation-created hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.version = '3.6.14'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].leader = True
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].machine = '0'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].public_address = '10.46.250.47'
+ .apps['http-proxy-configurator'].endpoint_bindings[''] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['http-proxy-configurator'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['requirer'].charm = 'local:http-proxy-configurator-1'
+ .apps['requirer'].charm_origin = 'local'
+ .apps['requirer'].charm_name = 'http-proxy-configurator'
+ .apps['requirer'].charm_rev = 1
+ .apps['requirer'].exposed = False
+ .apps['requirer'].base.name = 'ubuntu'
+ .apps['requirer'].base.channel = '24.04'
+ .apps['requirer'].app_status.current = 'waiting'
+ .apps['requirer'].app_status.message = 'waiting for machine'
+ .apps['requirer'].relations['http-proxy'][0].related_app = 'http-proxy-configurator'
+ .apps['requirer'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['requirer'].relations['http-proxy'][0].scope = 'global'
+ .apps['requirer'].units['requirer/0'].workload_status.current = 'waiting'
+ .apps['requirer'].units['requirer/0'].workload_status.message = 'waiting for machine'
+ .apps['requirer'].units['requirer/0'].juju_status.current = 'allocating'
+ .apps['requirer'].units['requirer/0'].machine = '2'
+ .apps['requirer'].endpoint_bindings[''] = 'alpha'
+ .apps['requirer'].endpoint_bindings['delegate-http-proxy'] = 'alpha'
+ .apps['requirer'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['squid-forward-proxy'].charm = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].charm_origin = 'charmhub'
+ .apps['squid-forward-proxy'].charm_name = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].charm_rev = 22
+ .apps['squid-forward-proxy'].exposed = False
+ .apps['squid-forward-proxy'].base.name = 'ubuntu'
+ .apps['squid-forward-proxy'].base.channel = '24.04'
+ .apps['squid-forward-proxy'].charm_channel = 'latest/edge'
+ .apps['squid-forward-proxy'].app_status.current = 'active'
+ .apps['squid-forward-proxy'].app_status.message = 'ready: 1'
+ .apps['squid-forward-proxy'].relations['http-proxy'][0].related_app = 'http-proxy-configurator'
+ .apps['squid-forward-proxy'].relations['http-proxy'][0].interface = 'http_proxy'
+ .apps['squid-forward-proxy'].relations['http-proxy'][0].scope = 'global'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].related_app = 'squid-forward-proxy'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].interface = 'squid_peer'
+ .apps['squid-forward-proxy'].relations['squid-peer'][0].scope = 'global'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.current = 'active'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].workload_status.message = 'ready: 1'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'idle'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.version = '3.6.14'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].leader = True
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].machine = '1'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].open_ports[0] = '3128/tcp'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].public_address = '10.46.250.244'
+ .apps['squid-forward-proxy'].endpoint_bindings[''] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['cos-agent'] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['http-proxy'] = 'alpha'
+ .apps['squid-forward-proxy'].endpoint_bindings['squid-peer'] = 'alpha'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].app_status.current = 'active'
+ .apps['http-proxy-configurator'].app_status.current = 'waiting'
+ .apps['http-proxy-configurator'].app_status.message = 'Waiting for complete requirer data.'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'active'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running delegate-http-proxy-relation-created hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'waiting'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'Waiting for complete requirer data.'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .machines['2'].instance_id = 'pending'
- .machines['2'].machine_status.current = 'allocating'
- .machines['2'].machine_status.message = 'Creating container'
- .machines['2'].modification_status.current = 'idle'
+ .machines['2'].instance_id = 'juju-82d035-2'
+ .machines['2'].machine_status.current = 'running'
+ .machines['2'].machine_status.message = 'Container started'
+ .machines['2'].modification_status.current = 'applied'
+ .machines['2'].hardware = 'arch=amd64 cores=0 mem=0M availability-zone=runnervmwffz4 virt-type=container'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .machines['2'].machine_status.message = 'Container started'
+ .machines['2'].machine_status.message = 'Running'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
+ .machines['2'].dns_name = '10.46.250.234'
+ .machines['2'].ip_addresses[0] = '10.46.250.234'
+ .apps['requirer'].units['requirer/0'].public_address = '10.46.250.234'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .machines['2'].juju_status.current = 'pending'
+ .machines['2'].juju_status.current = 'started'
+ .machines['2'].juju_status.version = '3.6.14'
+ .machines['2'].hostname = 'juju-82d035-2'
+ .machines['2'].network_interfaces['eth0'].ip_addresses[0] = '10.46.250.234'
+ .machines['2'].network_interfaces['eth0'].mac_address = '00:16:3e:23:40:b1'
+ .machines['2'].network_interfaces['eth0'].is_up = True
+ .machines['2'].network_interfaces['eth0'].gateway = '10.46.250.1'
+ .machines['2'].network_interfaces['eth0'].space = 'alpha'
- .apps['requirer'].app_status.message = 'waiting for machine'
+ .apps['requirer'].app_status.message = 'agent initialising'
- .apps['requirer'].units['requirer/0'].workload_status.message = 'waiting for machine'
+ .apps['requirer'].units['requirer/0'].workload_status.message = 'agent initialising'
+ .apps['requirer'].units['requirer/0'].juju_status.version = '3.6.14'
+ .apps['requirer'].units['requirer/0'].leader = True
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['requirer'].app_status.current = 'waiting'
- .apps['requirer'].app_status.message = 'agent initialising'
+ .apps['requirer'].app_status.current = 'maintenance'
+ .apps['requirer'].app_status.message = 'installing charm software'
- .apps['requirer'].units['requirer/0'].workload_status.current = 'waiting'
- .apps['requirer'].units['requirer/0'].workload_status.message = 'agent initialising'
- .apps['requirer'].units['requirer/0'].juju_status.current = 'allocating'
+ .apps['requirer'].units['requirer/0'].workload_status.current = 'maintenance'
+ .apps['requirer'].units['requirer/0'].workload_status.message = 'installing charm software'
+ .apps['requirer'].units['requirer/0'].juju_status.current = 'executing'
+ .apps['requirer'].units['requirer/0'].juju_status.message = 'running install hook'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running delegate-http-proxy-relation-changed hook for requirer/0'
- .apps['requirer'].units['requirer/0'].juju_status.message = 'running install hook'
+ .apps['requirer'].units['requirer/0'].juju_status.message = 'running leader-elected hook'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].app_status.current = 'waiting'
- .apps['http-proxy-configurator'].app_status.message = 'Waiting for complete requirer data.'
+ .apps['http-proxy-configurator'].app_status.current = 'active'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'waiting'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.message = 'Waiting for complete requirer data.'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].workload_status.current = 'active'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running delegate-http-proxy-relation-changed hook for requirer/0'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running delegate-http-proxy-relation-changed hook'
- .apps['requirer'].app_status.current = 'maintenance'
- .apps['requirer'].app_status.message = 'installing charm software'
+ .apps['requirer'].app_status.current = 'active'
- .apps['requirer'].units['requirer/0'].workload_status.current = 'maintenance'
- .apps['requirer'].units['requirer/0'].workload_status.message = 'installing charm software'
+ .apps['requirer'].units['requirer/0'].workload_status.current = 'active'
- .apps['requirer'].units['requirer/0'].juju_status.message = 'running leader-elected hook'
+ .apps['requirer'].units['requirer/0'].juju_status.message = 'running start hook'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running delegate-http-proxy-relation-changed hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running http-proxy-relation-changed hook'
- .apps['requirer'].units['requirer/0'].juju_status.message = 'running start hook'
+ .apps['requirer'].units['requirer/0'].juju_status.message = 'running http-proxy-relation-joined hook for http-proxy-configurator/0'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'idle'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'executing'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running squid-peer-relation-changed hook'
[32mINFO    [0m jubilant.wait:_juju.py:1245 wait: status changed:
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'executing'
- .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.message = 'running http-proxy-relation-changed hook'
+ .apps['http-proxy-configurator'].units['http-proxy-configurator/0'].juju_status.current = 'idle'
- .apps['requirer'].units['requirer/0'].juju_status.message = 'running http-proxy-relation-joined hook for http-proxy-configurator/0'
+ .apps['requirer'].units['requirer/0'].juju_status.message = 'running http-proxy-relation-changed hook'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'executing'
- .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.message = 'running squid-peer-relation-changed hook'
+ .apps['squid-forward-proxy'].units['squid-forward-proxy/0'].juju_status.current = 'idle'
[32mINFO    [0m jubilant:_juju.py:308 cli: juju ssh --model jubilant-0e894980 requirer/0 'curl -x http://10.46.250.244:3128/ https://canonical.com -I'